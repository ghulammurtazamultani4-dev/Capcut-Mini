<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ULTRA Video Editor â€“ Ghulam Murtaza</title>

<style>
body{margin:0;background:#0b0b0b;color:#fff;font-family:Arial}
header{background:#111;padding:10px}
header h2{margin:0}
.editor{display:flex;height:calc(100vh - 50px)}
.left{width:70%;padding:10px}
.right{width:30%;background:#131313;padding:10px;overflow:auto}
video,canvas{width:100%;background:#000;border-radius:8px}
.panel{background:#1a1a1a;padding:10px;margin-bottom:10px;border-radius:8px}
.panel h3{margin:0 0 6px;color:#ff2c55;font-size:14px}
button,input,select{width:100%;margin-top:6px;padding:7px;border:none;border-radius:6px;background:#ff2c55;color:#fff}
input[type=range]{background:none}
.timeline{background:#111;padding:6px;display:flex;gap:5px;overflow-x:auto}
.clip{background:#333;padding:6px 10px;border-radius:6px;font-size:12px}
</style>
</head>

<body>

<header>
<h2>ULTRA VIDEO EDITOR â€“ FINAL</h2>
</header>

<div class="editor">

<div class="left">
<video id="video" controls></video>
<canvas id="canvas"></canvas>
<div class="timeline" id="timeline"></div>
</div>

<div class="right">

<div class="panel">
<h3>ðŸŽ¬ Video</h3>
<input type="file" id="videoFile" accept="video/*">
<button onclick="addClip()">Add Clip</button>
</div>

<div class="panel">
<h3>ðŸŸ¢ Green Screen</h3>
<input type="range" id="green" min="0" max="255" value="150">
</div>

<div class="panel">
<h3>ðŸ–¼ Photo Editor</h3>
<input type="file" id="photoFile" accept="image/*">
<button onclick="addPhoto()">Add Photo</button>
<input type="range" id="photoSize" min="50" max="400" value="150">
</div>

<div class="panel">
<h3>ðŸŽ§ Audio Editor</h3>
<input type="file" id="audioFile" accept="audio/*">
<button onclick="addAudio()">Add Audio</button>
<input type="range" id="audioVolume" min="0" max="1" step="0.01" value="1">
</div>

<div class="panel">
<h3>ðŸ“¤ Export</h3>
<select id="quality">
<option value="1">1080p</option>
<option value="1.5">2K</option>
<option value="2">4K Preview</option>
</select>
<button onclick="exportVideo()">Export</button>
</div>

</div>
</div>

<script>
const video=document.getElementById("video");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const timeline=document.getElementById("timeline");

let clips=[],photos=[],audios=[];

videoFile.onchange=e=>{
video.src=URL.createObjectURL(e.target.files[0]);
};

function addClip(){
clips.push(video.src);
addTimeline("Video Clip");
}

function addTimeline(name){
const d=document.createElement("div");
d.className="clip";
d.innerText=name;
timeline.appendChild(d);
}

function addPhoto(){
const file=photoFile.files[0];
if(!file)return;
const img=new Image();
img.src=URL.createObjectURL(file);
photos.push({img,x:100,y:100,size:150});
addTimeline("Photo");
}

function addAudio(){
const file=audioFile.files[0];
if(!file)return;
const audio=new Audio(URL.createObjectURL(file));
audio.volume=audioVolume.value;
audio.play();
audios.push(audio);
addTimeline("Audio");
}

function draw(){
if(video.paused||video.ended)return;

const scale=quality.value;
canvas.width=video.videoWidth*scale;
canvas.height=video.videoHeight*scale;

ctx.drawImage(video,0,0,canvas.width,canvas.height);

/* GREEN SCREEN */
const frame=ctx.getImageData(0,0,canvas.width,canvas.height);
for(let i=0;i<frame.data.length;i+=4){
if(frame.data[i+1]>green.value){
frame.data[i+3]=0;
}
}
ctx.putImageData(frame,0,0);

/* PHOTOS */
photos.forEach(p=>{
ctx.drawImage(p.img,p.x,p.y,p.size,p.size);
});

requestAnimationFrame(draw);
}
video.onplay=draw;

canvas.onmousemove=e=>{
if(photos.length){
photos[photos.length-1].x=e.offsetX;
photos[photos.length-1].y=e.offsetY;
}
};
photoSize.oninput=e=>{
if(photos.length){
photos[photos.length-1].size=e.target.value;
}
};

function exportVideo(){
alert("ULTRA FINAL EXPORT\nCanvas based 4K preview\n(Real encoder browser limit)");
}
</script>

</body>
</html>
