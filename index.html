<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ULTRA Video Editor</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Poppins;background:#0b0b0b;color:#fff}
header{height:55px;background:#111;display:flex;align-items:center;padding:0 15px;color:#ff2c55;font-weight:bold}
.main{display:flex;height:calc(100vh - 115px)}
.tools{width:70px;background:#141414;display:flex;flex-direction:column;align-items:center;padding-top:10px}
.tool{width:45px;height:45px;margin:6px 0;background:#222;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer}
.tool:hover{background:#ff2c55}
.preview{flex:1;background:#000;display:flex;align-items:center;justify-content:center;position:relative}
canvas{background:#000;border-radius:10px;cursor:move}
.panel{width:300px;background:#141414;padding:12px}
.panel h3{margin-top:0;color:#ff2c55}
.panel button,input,select{width:100%;margin-top:6px;padding:6px;border:none;border-radius:6px}
.panel button{background:#ff2c55;color:#fff;cursor:pointer}
.timeline{height:60px;background:#111;display:flex;align-items:center;padding:0 10px}
.track{background:#222;height:30px;width:140px;margin-right:6px;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer}
.active{outline:2px solid #ff2c55}
</style>
</head>

<body>

<header>ULTRA Video Editor ‚Äì PART 4</header>

<div class="main">

<!-- TOOLS -->
<div class="tools">
<div class="tool" onclick="openPanel('video')">üé•</div>
<div class="tool" onclick="openPanel('text')">üî§</div>
<div class="tool" onclick="openPanel('canvas')">üìê</div>
<div class="tool" onclick="openPanel('blur')">üå´Ô∏è</div>
</div>

<!-- PREVIEW -->
<div class="preview">
<canvas id="canvas" width="720" height="405"></canvas>
<video id="video" style="display:none"></video>
</div>

<!-- PANEL -->
<div class="panel" id="panel">
<h3>Welcome</h3>
Select tool
</div>

</div>

<div class="timeline" id="timeline"></div>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const panel=document.getElementById("panel");
const timeline=document.getElementById("timeline");
const video=document.getElementById("video");

let layers=[];
let activeLayer=null;
let drag=false,offsetX=0,offsetY=0;

/* DRAW */
function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
layers.forEach(l=>{
if(l.type==="video" && l.ready){
ctx.drawImage(video,l.x,l.y,l.w,l.h);
}
if(l.type==="text"){
ctx.fillStyle="white";
ctx.font="32px Poppins";
ctx.fillText(l.text,l.x,l.y);
}
});
}

/* PANEL */
function openPanel(type){
if(type==="video"){
panel.innerHTML=`
<h3>Video</h3>
<input type="file" accept="video/*" onchange="loadVideo(this)">
`;
}
if(type==="text"){
panel.innerHTML=`
<h3>Text</h3>
<input id="txt" placeholder="Enter text">
<button onclick="addText()">Add Text</button>
`;
}
if(type==="canvas"){
panel.innerHTML=`
<h3>Canvas Size</h3>
<button onclick="setCanvas(1280,720)">YouTube 16:9</button>
<button onclick="setCanvas(720,1280)">TikTok 9:16</button>
<button onclick="setCanvas(800,800)">Square 1:1</button>
`;
}
if(type==="blur"){
panel.innerHTML=`
<h3>Background</h3>
<button onclick="ctx.filter='blur(6px)';draw()">Blur BG</button>
<button onclick="ctx.filter='none';draw()">Remove Blur</button>
`;
}
}

/* VIDEO */
function loadVideo(input){
video.src=URL.createObjectURL(input.files[0]);
video.onloadeddata=()=>{
let layer={
id:Date.now(),
type:"video",
x:50,y:50,w:300,h:170,
ready:true
};
layers.push(layer);
setActive(layer.id);
refreshTimeline();
draw();
};
video.play();
}

/* TEXT */
function addText(){
let txt=document.getElementById("txt").value;
let layer={id:Date.now(),type:"text",text:txt,x:100,y:200};
layers.push(layer);
setActive(layer.id);
refreshTimeline();
draw();
}

/* CANVAS */
function setCanvas(w,h){
canvas.width=w;
canvas.height=h;
draw();
}

/* DRAG */
canvas.onmousedown=e=>{
if(!activeLayer)return;
drag=true;
offsetX=e.offsetX-activeLayer.x;
offsetY=e.offsetY-activeLayer.y;
};
canvas.onmousemove=e=>{
if(!drag || !activeLayer)return;
activeLayer.x=e.offsetX-offsetX;
activeLayer.y=e.offsetY-offsetY;
draw();
};
canvas.onmouseup=()=>drag=false;

/* TIMELINE */
function refreshTimeline(){
timeline.innerHTML="";
layers.forEach(l=>{
let d=document.createElement("div");
d.className="track"+(l.id===activeLayer?.id?" active":"");
d.innerText=l.type;
d.onclick=()=>setActive(l.id);
timeline.appendChild(d);
});
}
function setActive(id){
activeLayer=layers.find(l=>l.id===id);
refreshTimeline();
}
draw();
</script>

</body>
</html>

