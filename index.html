<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CapCut Mini Pro â€“ Ghulam Murtaza</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
body{margin:0;background:#0b0b0b;color:#fff;font-family:Segoe UI;overflow:hidden}
header{height:60px;background:#111;display:flex;align-items:center;justify-content:center;border-bottom:1px solid #222}
header span{color:#ff2c55}

.main{display:grid;grid-template-columns:220px 1fr;height:calc(100vh - 60px)}

.tools{background:#151515;padding:12px;border-right:1px solid #222}
.tool{padding:10px;background:#1f1f1f;border-radius:6px;margin-bottom:8px;cursor:pointer}
.tool:hover{background:#ff2c55}

.editor{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative}
.preview{width:70%;aspect-ratio:16/9;background:#000;border-radius:10px}
video,canvas{width:100%;height:100%;border-radius:10px}

.controls{margin:10px;display:flex;gap:8px;flex-wrap:wrap}
.controls input,.controls button,.controls select{background:#ff2c55;border:none;color:#fff;padding:6px 10px;border-radius:5px}

.timeline{position:absolute;bottom:0;width:100%;height:110px;background:#111;border-top:1px solid #222;padding:12px}
.track{height:36px;background:#1e1e1e;border-radius:6px}
.clip{width:35%;height:100%;background:#ff2c55;border-radius:6px;text-align:center;line-height:36px;font-size:12px}
</style>
</head>

<body>

<header><h3><span>CapCut</span> Mini Pro â€“ Ghulam Murtaza</h3></header>

<div class="main">

<div class="tools">
<div class="tool">ðŸŽ¬ Media</div>
<div class="tool">âœ‚ Chroma Key</div>
<div class="tool">ðŸ˜Š Stickers</div>
<div class="tool">ðŸŽ¨ Effects</div>
<div class="tool">â¬‡ Export</div>
</div>

<div class="editor">

<div class="preview">
<video id="video" controls></video>
<canvas id="canvas" style="display:none"></canvas>
</div>

<div class="controls">
<input type="file" id="videoFile" accept="video/*">
<input type="file" id="stickerFile" accept="image/png">
<label>Green Tolerance</label>
<input type="range" id="tolerance" min="20" max="150" value="80">
<select id="resolution">
<option value="1080">1080p</option>
<option value="1440">2K</option>
<option value="2160">4K</option>
</select>
<button onclick="exportVideo()">Export</button>
</div>

<div class="timeline">
<div class="track"><div class="clip">Video Clip</div></div>
</div>

</div>
</div>

<script>
const video=document.getElementById("video");
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
let sticker=null,stickX=100,stickY=100;

document.getElementById("videoFile").onchange=e=>{
video.src=URL.createObjectURL(e.target.files[0]);
};

document.getElementById("stickerFile").onchange=e=>{
sticker=new Image();
sticker.src=URL.createObjectURL(e.target.files[0]);
};

video.onplay=()=>draw();

function draw(){
if(video.paused||video.ended)return;
const res=document.getElementById("resolution").value;
canvas.width=res*16/9;
canvas.height=res;
ctx.drawImage(video,0,0,canvas.width,canvas.height);

let frame=ctx.getImageData(0,0,canvas.width,canvas.height);
let d=frame.data;
let tol=document.getElementById("tolerance").value;

for(let i=0;i<d.length;i+=4){
let r=d[i],g=d[i+1],b=d[i+2];
if(g>150 && g>r+tol && g>b+tol){
d[i+3]=0;
}
}
ctx.putImageData(frame,0,0);

if(sticker)ctx.drawImage(sticker,stickX,stickY,120,120);

requestAnimationFrame(draw);
}

function exportVideo(){
const stream=canvas.captureStream(30);
const recorder=new MediaRecorder(stream,{mimeType:"video/webm"});
let chunks=[];
recorder.ondataavailable=e=>chunks.push(e.data);
recorder.onstop=()=>{
const blob=new Blob(chunks,{type:"video/webm"});
const a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="CapCutMini_Export.webm";
a.click();
};
recorder.start();
video.play();
setTimeout(()=>{recorder.stop();video.pause()},video.duration*1000);
}
</script>

</body>
</html>
